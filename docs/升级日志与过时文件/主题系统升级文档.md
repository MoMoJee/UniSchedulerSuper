# 主题系统升级文档

## 版本信息
- **升级日期**: 2025年11月3日
- **版本**: v20251103-002
- **功能**: 新增5个创意主题

## 功能概述

在原有的浅色/深色/跟随系统三种基础主题基础上,新增了5个富有创意的主题:

### 新增主题

#### 1. 🇨🇳 中国红 (china-red)
**设计理念**: 以中国国旗的配色为灵感
- **主色调**: 中国红 (#de2910)
- **辅助色**: 金黄色 (#ffde00)
- **背景**: 温暖的米白和浅红色系
- **适用场景**: 节日庆典、爱国主题、传统文化相关

**配色特点**:
- Primary: 中国红 `#de2910`
- Success: 金黄 `#ffde00`
- 背景: 米白 `#fffef8` → 浅红 `#ffe8e0`
- 文本: 深棕 `#3d1f1f`

#### 2. 🌸 淡暖色 (warm-pastel)
**设计理念**: 粉色、淡红、淡黄、淡橙的柔和组合
- **主色调**: 柔和的粉色系
- **氛围**: 温柔、甜美、治愈
- **适用场景**: 女性用户、温馨记录、生活日记

**配色特点**:
- Primary: 粉红 `#ff9eb6`
- Success: 淡橙 `#ffcc99`
- Warning: 淡黄 `#ffd699`
- 背景: 粉白 `#fff9f9` → 浅粉 `#ffe8ee`
- 文本: 暖灰 `#5a4a4a`

#### 3. ❄️ 淡冷色 (cool-pastel)
**设计理念**: 薄荷绿、天蓝、淡灰的清爽组合
- **主色调**: 清新的蓝绿色系
- **氛围**: 清爽、宁静、专注
- **适用场景**: 夏日使用、清新风格、理性思考

**配色特点**:
- Primary: 薄荷蓝 `#7ec8c8`
- Success: 薄荷绿 `#8fd9b6`
- Info: 天蓝 `#99c8d4`
- 背景: 淡蓝白 `#f8fcfc` → 浅蓝绿 `#e8f4f4`
- 文本: 冷灰 `#3d4f4f`

#### 4. 🍰 马卡龙 (macaron)
**设计理念**: 法式马卡龙的柔和甜美色系
- **主色调**: 柔和的紫色、粉色、绿色混合
- **氛围**: 甜美、优雅、精致
- **适用场景**: 美食记录、优雅风格、少女心

**配色特点**:
- Primary: 淡紫 `#c8a8d4`
- Success: 淡绿 `#a8d4b8`
- Danger: 淡粉 `#f4a8b8`
- Warning: 奶黄 `#f4d4a8`
- 背景: 奶白 `#fefcf9` → 浅米 `#f5f0e8`
- 文本: 深褐 `#4a4032`

#### 5. ⚡ 多巴胺 (dopamine)
**设计理念**: 高饱和度鲜艳色彩,激发活力
- **主色调**: 高饱和度橙色、紫色、青色
- **氛围**: 活力、激情、创造力
- **适用场景**: 创意工作、运动健身、激励自己

**配色特点**:
- Primary: 活力橙 `#ff6b35`
- Success: 荧光青 `#00d9ff`
- Danger: 亮粉 `#ff006e`
- Warning: 亮黄 `#ffbe0b`
- Info: 紫罗兰 `#8338ec`
- 背景: 纯白 `#ffffff` → 淡黄 `#fff3cd`
- 文本: 深黑 `#1a1a1a`
- **特色**: Navbar使用渐变色 (橙→粉→紫)

## 技术实现

### 1. CSS变量系统

每个主题定义了完整的60+个CSS变量:

```css
[data-theme="theme-name"] {
    /* 基础背景色 */
    --bg-primary: ...;
    --bg-secondary: ...;
    --bg-tertiary: ...;
    --bg-body: ...;
    
    /* 文本颜色 */
    --text-primary: ...;
    --text-secondary: ...;
    --text-muted: ...;
    
    /* 品牌色 */
    --primary: ...;
    --success: ...;
    --danger: ...;
    --warning: ...;
    --info: ...;
    
    /* 组件颜色 */
    --card-bg: ...;
    --modal-bg: ...;
    --input-bg: ...;
    --navbar-bg: ...;
    
    /* FullCalendar */
    --fc-bg: ...;
    --fc-event-bg: ...;
    --fc-today-bg: ...;
    
    /* Scrollbar */
    --scrollbar-thumb: ...;
}
```

### 2. ThemeManager更新

**文件**: `core/static/js/theme-manager.js`

**更新内容**:
- 扩展 `themes` 数组,新增5个主题值
- 更新 `getThemeDisplayName()` 添加中文名称
- 更新 `getThemeIcon()` 为每个主题分配图标

```javascript
this.themes = [
    'light', 'dark', 'auto',
    'china-red', 'warm-pastel', 'cool-pastel', 
    'macaron', 'dopamine'
];
```

### 3. UI更新

**文件**: `core/templates/home_new.html`

在设置模态框中添加主题选择下拉框,使用 `<optgroup>` 分组:

```html
<select class="form-select" id="theme">
    <optgroup label="基础主题">
        <option value="light">浅色模式</option>
        <option value="dark">深色模式</option>
        <option value="auto" selected>跟随系统</option>
    </optgroup>
    <optgroup label="创意主题">
        <option value="china-red">🇨🇳 中国红</option>
        <option value="warm-pastel">🌸 淡暖色</option>
        <option value="cool-pastel">❄️ 淡冷色</option>
        <option value="macaron">🍰 马卡龙</option>
        <option value="dopamine">⚡ 多巴胺</option>
    </optgroup>
</select>
```

### 4. 数据模型更新

**文件**: `core/models.py`

更新 `DATA_SCHEMA` 中的注释:

```python
"theme": {
    "type": str,
    "nullable": False,
    "default": "auto",  # light, dark, auto, china-red, warm-pastel, cool-pastel, macaron, dopamine
}
```

## 使用说明

### 切换主题

1. **通过设置界面**:
   - 点击右上角设置按钮
   - 在"外观偏好"部分找到"主题模式"下拉框
   - 选择想要的主题
   - 主题会立即应用并自动保存

2. **通过JavaScript API**:
   ```javascript
   // 应用主题
   window.themeManager.applyTheme('china-red');
   
   // 获取当前主题
   const current = window.themeManager.getCurrentTheme();
   
   // 获取主题显示名称
   const name = window.themeManager.getThemeDisplayName('dopamine'); // "多巴胺"
   ```

### 主题持久化

- 主题选择会自动保存到用户设置
- 刷新页面后会保持上次选择的主题
- 新用户默认使用"跟随系统"主题

### 主题兼容性

所有主题都完整支持:
- ✅ 全局背景和文本
- ✅ 导航栏
- ✅ 模态框
- ✅ 表单组件
- ✅ 按钮和卡片
- ✅ FullCalendar日历
- ✅ 提醒和待办
- ✅ AI聊天界面
- ✅ 四象限矩阵
- ✅ 日程组管理
- ✅ 滚动条

## 主题选择建议

### 按使用场景

- **严肃工作**: 浅色模式、深色模式、淡冷色
- **创意工作**: 多巴胺、中国红
- **日常生活**: 淡暖色、马卡龙
- **节日庆典**: 中国红
- **夏日使用**: 淡冷色
- **护眼需求**: 深色模式、淡暖色、马卡龙

### 按用户偏好

- **喜欢传统**: 中国红
- **喜欢甜美**: 淡暖色、马卡龙
- **喜欢清爽**: 淡冷色
- **喜欢活力**: 多巴胺
- **注重效率**: 浅色、深色、跟随系统

## 技术亮点

1. **完整的颜色体系**: 每个主题都有60+个精心设计的颜色变量
2. **平滑过渡**: 主题切换时有0.3s的平滑过渡动画
3. **即时预览**: 切换主题后立即看到效果,无需刷新
4. **持久化存储**: 选择会自动保存到后端数据库
5. **向后兼容**: 不影响现有功能,所有组件都适配新主题
6. **可扩展**: 未来可以轻松添加更多主题

## 后续计划

### 近期优化
- [ ] 添加主题预览图
- [ ] 支持自定义主题
- [ ] 主题分享功能

### 长期规划
- [ ] 主题商店
- [ ] 社区主题
- [ ] 动态主题(时间段自动切换)
- [ ] 主题编辑器

## 测试建议

请在以下场景测试新主题:

1. **基础功能**
   - 创建/编辑/删除日程
   - 创建/编辑待办和提醒
   - 使用AI聊天

2. **视觉效果**
   - 检查文本可读性
   - 检查对比度是否合适
   - 检查颜色搭配是否和谐

3. **兼容性**
   - 不同浏览器(Chrome, Firefox, Edge)
   - 不同屏幕尺寸
   - 深色/浅色系统主题

## 版本历史

- **v20251103-002** (2025-11-03): 新增5个创意主题
- **v20251103-001** (2025-11-03): 实现深色模式和主题系统基础架构

---

**开发者**: GitHub Copilot  
**日期**: 2025年11月3日
