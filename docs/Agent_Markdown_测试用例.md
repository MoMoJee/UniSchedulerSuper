# Agent Markdown 测试用例

测试Agent聊天界面的完整Markdown功能，包括表格、脚注和数学公式。

---

## 测试用例 1: 基础表格

**提示词：**
```
请帮我创建一个项目任务表格，包含任务名称、负责人、状态和优先级
```

**期望输出示例：**
```markdown
| 任务名称 | 负责人 | 状态 | 优先级 |
|---------|--------|------|--------|
| 需求分析 | 张三 | 已完成 | 高 |
| 系统设计 | 李四 | 进行中 | 高 |
| 代码开发 | 王五 | 待开始 | 中 |
| 测试验收 | 赵六 | 待开始 | 中 |
```

---

## 测试用例 2: 数学公式（基础）

**提示词：**
```
请用数学公式展示二次方程的求根公式
```

**期望输出示例：**
```markdown
二次方程 $ax^2 + bx + c = 0$ 的求根公式为：

$$
x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}
$$

其中：
- $a \neq 0$ 是二次项系数
- $b$ 是一次项系数
- $c$ 是常数项
- $\Delta = b^2 - 4ac$ 是判别式
```

---

## 测试用例 3: 数学公式（高级）

**提示词：**
```
请解释正态分布的概率密度函数，用数学公式表示
```

**期望输出示例：**
```markdown
# 正态分布

正态分布的概率密度函数为：

$$
f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{(x-\mu)^2}{2\sigma^2}}
$$

其中：
- $\mu$ 是均值（期望值）
- $\sigma$ 是标准差
- $\sigma^2$ 是方差

标准正态分布（$\mu=0, \sigma=1$）的概率密度函数简化为：

$$
\phi(x) = \frac{1}{\sqrt{2\pi}} e^{-\frac{x^2}{2}}
$$
```

---

## 测试用例 4: 脚注功能

**提示词：**
```
请介绍人工智能的发展历程，并添加相关的历史事件脚注
```

**期望输出示例：**
```markdown
# 人工智能发展简史

人工智能（AI）的概念最早由阿兰·图灵提出[^1]。1956年，达特茅斯会议[^2]标志着人工智能作为一门学科正式诞生。

经过多年发展，人工智能经历了两次寒冬[^3]，但最终在21世纪迎来了黄金时代，特别是深度学习的突破性进展[^4]。

[^1]: 阿兰·图灵在1950年发表了《计算机器与智能》论文，提出了著名的"图灵测试"。
[^2]: 1956年夏天，约翰·麦卡锡等人在达特茅斯学院组织了一次会议，正式提出了"人工智能"这一术语。
[^3]: 第一次AI寒冬（1974-1980）和第二次AI寒冬（1987-1993）是由于技术限制和过高期望导致的资金枯竭。
[^4]: 2012年AlexNet在ImageNet竞赛中的胜利标志着深度学习时代的开始。
```

---

## 测试用例 5: 综合应用（表格+公式）

**提示词：**
```
创建一个物理实验数据分析报告，包含数据表格和计算公式
```

**期望输出示例：**
```markdown
# 自由落体实验报告

## 实验数据

| 实验次数 | 高度 h (m) | 时间 t (s) | 重力加速度 g (m/s²) |
|---------|-----------|-----------|-------------------|
| 1 | 5.0 | 1.01 | 9.78 |
| 2 | 5.0 | 1.02 | 9.61 |
| 3 | 5.0 | 1.00 | 10.00 |
| 平均 | 5.0 | 1.01 | 9.80 |

## 计算公式

自由落体运动的基本公式：

$$
h = \frac{1}{2}gt^2
$$

重力加速度的计算公式：

$$
g = \frac{2h}{t^2}
$$

## 结论

实验测得的重力加速度平均值为 $g = 9.80 \text{ m/s}^2$，与理论值相符。
```

---

## 测试用例 6: 综合应用（所有功能）

**提示词：**
```
创建一个数据科学项目总结报告，包含任务表格、统计公式、引用脚注和分析图表
```

**期望输出示例：**
```markdown
# 用户行为分析项目总结

## 项目进度

| 阶段 | 任务 | 状态 | 完成度 |
|------|------|------|--------|
| 1 | 数据收集 | ✅ 完成 | 100% |
| 2 | 数据清洗 | ✅ 完成 | 100% |
| 3 | 特征工程 | 🔄 进行中 | 75% |
| 4 | 模型训练 | ⏳ 待开始 | 0% |

## 统计分析

### 用户留存率计算

留存率的计算公式[^1]为：

$$
\text{Retention Rate} = \frac{\text{Active Users}}{\text{Total Users}} \times 100\%
$$

### 转化漏斗分析

转化率 $CR$ 的计算：

$$
CR = \frac{N_{converted}}{N_{total}} = \frac{1250}{10000} = 12.5\%
$$

## 关键发现

1. **用户增长**：月活跃用户增长 $\Delta MAU = +15\%$
2. **留存改善**：7日留存率从 $42\%$ 提升至 $58\%$
3. **转化优化**：购买转化率提升 $3.2$ 个百分点

## 参考文献

本分析采用了标准的留存率计算方法[^2]和漏斗分析模型[^3]。

[^1]: 留存率是衡量用户粘性的重要指标，通常以日留存、周留存、月留存来衡量。
[^2]: Retention Rate Calculation - Standard Industry Practice (2024)
[^3]: Funnel Analysis Framework - AARRR Model by Dave McClure
```

---

## 测试用例 7: 复杂数学公式

**提示词：**
```
展示矩阵运算和微积分的常用公式
```

**期望输出示例：**
```markdown
# 高等数学公式集

## 矩阵运算

矩阵乘法：

$$
\begin{bmatrix}
a & b \\
c & d
\end{bmatrix}
\begin{bmatrix}
e & f \\
g & h
\end{bmatrix}
=
\begin{bmatrix}
ae+bg & af+bh \\
ce+dg & cf+dh
\end{bmatrix}
$$

## 微积分

### 导数定义

$$
f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}
$$

### 积分公式

$$
\int_a^b f(x)dx = F(b) - F(a)
$$

### 常用极限

$$
\lim_{n \to \infty} \left(1 + \frac{1}{n}\right)^n = e
$$

### 泰勒级数

$$
f(x) = f(a) + f'(a)(x-a) + \frac{f''(a)}{2!}(x-a)^2 + \cdots + \frac{f^{(n)}(a)}{n!}(x-a)^n + \cdots
$$
```

---

## 测试用例 8: 表格对齐和格式

**提示词：**
```
创建一个产品价格对比表
```

**期望输出示例：**
```markdown
| 产品名称 | 基础版 | 专业版 | 企业版 |
|---------|--------|--------|--------|
| 价格 | ¥99/月 | ¥299/月 | ¥999/月 |
| 用户数 | 1 | 5 | 无限 |
| 存储空间 | 10GB | 100GB | 1TB |
| 技术支持 | 社区 | 邮件 | 24/7 电话 |
| API 调用 | 1000/天 | 10000/天 | 无限 |
```

---

## 验证清单

测试每个功能时，检查以下项目：

### 表格
- [ ] 表头正确显示（蓝色背景）
- [ ] 单元格边框清晰
- [ ] 斑马纹效果（偶数行浅色）
- [ ] 悬停高亮效果
- [ ] 响应式宽度适配
- [ ] 深色主题下样式正常

### 数学公式
- [ ] 行内公式正确渲染 `$...$`
- [ ] 块级公式居中显示 `$$...$$`
- [ ] LaTeX 语法正确解析
- [ ] 特殊符号正确显示
- [ ] 矩阵、分式、积分等复杂公式正常
- [ ] 公式可读性良好

### 脚注
- [ ] 脚注引用显示为上标
- [ ] 点击引用可跳转到脚注
- [ ] 脚注列表在底部显示
- [ ] 返回链接（↩）可用
- [ ] 多个脚注正确编号
- [ ] 脚注内容完整显示

### 综合测试
- [ ] 各元素互不干扰
- [ ] 混合使用时排版正常
- [ ] 复制粘贴功能正常
- [ ] 移动端显示正常
- [ ] 性能流畅，无卡顿

---

## 已知问题与限制

1. **表格宽度**：超长表格可能需要横向滚动
2. **公式复杂度**：极其复杂的公式可能渲染较慢
3. **脚注位置**：脚注始终在消息底部，不可自定义位置
4. **浏览器兼容**：MathJax 需要现代浏览器支持

---

测试愉快！🎉
