# ç¾¤ç»„åä½œåŠŸèƒ½å‡çº§æ–¹æ¡ˆ

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-11-11  
**çŠ¶æ€**: å¼€å‘ä¸­

---

## ğŸ“‹ å¾…åŠäº‹é¡¹æ¸…å• (TODO List)

### Phase 1: æ•°æ®æ¨¡å‹è®¾è®¡ âœ…
- [x] 1.1 æ•°æ®åº“æ¨¡å‹è®¾è®¡
- [x] 1.2 UserData æ‰©å±•è®¾è®¡
- [x] 1.3 æ•°æ®æµè½¬é€»è¾‘è®¾è®¡

### Phase 2: åç«¯å®ç° â³
- [ ] 2.1 æ•°æ®åº“è¿ç§»è„šæœ¬
- [ ] 2.2 models.py ä¿®æ”¹
- [ ] 2.3 views_share_groups.py æ ¸å¿ƒé€»è¾‘
- [ ] 2.4 views_events.py ä¿®æ”¹ç‚¹
- [ ] 2.5 urls.py è·¯ç”±é…ç½®
- [ ] 2.6 åŒæ­¥æœºåˆ¶å®ç°

### Phase 3: å‰ç«¯å®ç° â³
- [ ] 3.1 é€‰é¡¹å¡åˆ‡æ¢ UI
- [ ] 3.2 ç¼–è¾‘å¼¹çª—æ·»åŠ åˆ†äº«é€‰é¡¹
- [ ] 3.3 ç¾¤ç»„ç®¡ç†ç•Œé¢
- [ ] 3.4 åªè¯»äº‹ä»¶æ¸²æŸ“
- [ ] 3.5 ç‰ˆæœ¬æ£€æµ‹ä¸è‡ªåŠ¨åˆ·æ–°

### Phase 4: æµ‹è¯•ä¸ä¼˜åŒ– â³
- [ ] 4.1 å•å…ƒæµ‹è¯•
- [ ] 4.2 é›†æˆæµ‹è¯•
- [ ] 4.3 æ€§èƒ½ä¼˜åŒ–
- [ ] 4.4 è¾¹ç•Œæ¡ä»¶å¤„ç†

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡ç†å¿µ

### è®¾è®¡åŸåˆ™
**"æ‰“æ ‡ç­¾" + "æ•°æ®åº“æŸ¥è¯¢"æ¨¡å¼**

1. **åˆ†äº«æœºåˆ¶**: ç”¨æˆ·é€šè¿‡ç¼–è¾‘æ—¥ç¨‹ï¼Œç»™ event æ·»åŠ  `shared_to_groups: ["share_group_xxx"]` æ ‡ç­¾
2. **æ•°æ®æ±‡æ€»**: ç¾¤ç»„æ•°æ®åº“å®æ—¶æŸ¥è¯¢æ‰€æœ‰æˆå‘˜ä¸­å¸¦æœ‰è¯¥ç¾¤ç»„æ ‡ç­¾çš„æ—¥ç¨‹
3. **æ•°æ®è·å–**: ç”¨æˆ·æŸ¥çœ‹ç¾¤ç»„æ—¥ç¨‹æ—¶ï¼Œç›´æ¥è¯»å–ç¾¤ç»„æ•°æ®åº“ï¼ˆä¸ç¼“å­˜åˆ°æœ¬åœ°ï¼‰
4. **å®æ—¶åŒæ­¥**: ç¼–è¾‘/åˆ é™¤æ“ä½œåï¼Œç«‹å³è§¦å‘ç¾¤ç»„æ•°æ®åº“åŒæ­¥
5. **ç‰ˆæœ¬æ§åˆ¶**: é€šè¿‡ç‰ˆæœ¬å·æœºåˆ¶ï¼Œè®©å‰ç«¯æ£€æµ‹åˆ°æ•°æ®æ›´æ–°å¹¶æç¤ºåˆ·æ–°

### ä¸ç°æœ‰ç³»ç»Ÿçš„å…³ç³»
- **æ—¥ç¨‹ç»„ï¼ˆgroupIDï¼‰**: ç”¨æˆ·ä¸ªäººçš„æ—¥ç¨‹åˆ†ç±»ï¼Œå¦‚"å·¥ä½œ"ã€"å­¦ä¹ "ã€"ç”Ÿæ´»"
- **åˆ†äº«ç¾¤ç»„ï¼ˆshare_group_idï¼‰**: åä½œç¾¤ç»„ï¼Œå¤šäººå…±äº«æ—¥ç¨‹
- **ä¸¤è€…ç‹¬ç«‹**: åŒä¸€ä¸ªæ—¥ç¨‹å¯ä»¥æ—¢å±äºæŸä¸ªæ—¥ç¨‹ç»„ï¼Œåˆåˆ†äº«åˆ°æŸä¸ªç¾¤ç»„

---

## ğŸ“Š Part 1: æ•°æ®æ¨¡å‹è®¾è®¡

### 1.1 æ•°æ®åº“æ¨¡å‹

#### CollaborativeCalendarGroupï¼ˆåˆ†äº«ç¾¤ç»„ï¼‰
```python
class CollaborativeCalendarGroup(models.Model):
    """åä½œæ—¥å†ç¾¤ç»„"""
    share_group_id = models.CharField(max_length=100, primary_key=True)
    share_group_name = models.CharField(max_length=200)
    share_group_color = models.CharField(max_length=20, default='#3498db')
    share_group_description = models.TextField(blank=True)
    owner = models.ForeignKey(User, on_delete=models.CASCADE, related_name='owned_share_groups')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'collaborative_calendar_group'
        verbose_name = 'åä½œæ—¥å†ç¾¤ç»„'
        verbose_name_plural = 'åä½œæ—¥å†ç¾¤ç»„'
```

**å­—æ®µè¯´æ˜**:
- `share_group_id`: ç¾¤ç»„å”¯ä¸€æ ‡è¯†ï¼Œä½¿ç”¨ `share_group_` å‰ç¼€é¿å…ä¸æ—¥ç¨‹ç»„ ID å†²çª
- `share_group_name`: ç¾¤ç»„åç§°ï¼Œå¦‚"å·¥ä½œåä½œç»„"ã€"å®¶åº­æ—¥å†"
- `share_group_color`: ç¾¤ç»„é¢œè‰²æ ‡ç­¾ï¼Œç”¨äºå‰ç«¯æ˜¾ç¤º
- `owner`: ç¾¤ä¸»ï¼Œæ‹¥æœ‰ç®¡ç†æƒé™
- `created_at/updated_at`: æ—¶é—´æˆ³

#### GroupMembershipï¼ˆç¾¤ç»„æˆå‘˜å…³ç³»ï¼‰
```python
class GroupMembership(models.Model):
    """ç¾¤ç»„æˆå‘˜å…³ç³»"""
    share_group = models.ForeignKey(
        CollaborativeCalendarGroup, 
        on_delete=models.CASCADE,
        related_name='memberships'
    )
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    role = models.CharField(max_length=20, default='member')  # owner/admin/member
    joined_at = models.DateTimeField(auto_now_add=True)
    
    class Meta:
        db_table = 'group_membership'
        unique_together = ('share_group', 'user')
        verbose_name = 'ç¾¤ç»„æˆå‘˜'
        verbose_name_plural = 'ç¾¤ç»„æˆå‘˜'
```

**å­—æ®µè¯´æ˜**:
- `share_group`: å…³è”çš„ç¾¤ç»„
- `user`: æˆå‘˜ç”¨æˆ·
- `role`: è§’è‰²
  - `owner`: ç¾¤ä¸»ï¼ˆåˆ›å»ºè€…ï¼‰
  - `admin`: ç®¡ç†å‘˜ï¼ˆå¯é‚€è¯·/ç§»é™¤æˆå‘˜ï¼‰
  - `member`: æ™®é€šæˆå‘˜
- `unique_together`: ç¡®ä¿åŒä¸€ç”¨æˆ·åœ¨åŒä¸€ç¾¤ç»„ä¸­åªæœ‰ä¸€æ¡è®°å½•

#### GroupCalendarDataï¼ˆç¾¤ç»„æ—¥å†æ•°æ®ï¼‰
```python
class GroupCalendarData(models.Model):
    """ç¾¤ç»„æ—¥å†æ•°æ® - æ±‡æ€»æ‰€æœ‰æˆå‘˜çš„å…±äº«æ—¥ç¨‹"""
    share_group = models.OneToOneField(
        CollaborativeCalendarGroup,
        on_delete=models.CASCADE,
        related_name='calendar_data'
    )
    events_data = models.JSONField(default=list)  # æ‰€æœ‰å…±äº«äº‹ä»¶åˆ—è¡¨
    last_updated = models.DateTimeField(auto_now=True)
    version = models.IntegerField(default=0)  # ç‰ˆæœ¬å·ï¼Œç”¨äºå‰ç«¯æ£€æµ‹æ›´æ–°
    
    class Meta:
        db_table = 'group_calendar_data'
        verbose_name = 'ç¾¤ç»„æ—¥å†æ•°æ®'
        verbose_name_plural = 'ç¾¤ç»„æ—¥å†æ•°æ®'
```

**å­—æ®µè¯´æ˜**:
- `events_data`: JSON æ ¼å¼ï¼Œå­˜å‚¨æ‰€æœ‰æˆå‘˜åˆ†äº«åˆ°è¯¥ç¾¤ç»„çš„æ—¥ç¨‹
  ```json
  [
    {
      "id": "event_xxx",
      "title": "å›¢é˜Ÿä¼šè®®",
      "start": "2025-11-12T10:00:00",
      "end": "2025-11-12T11:00:00",
      "owner_id": 123,
      "owner_name": "å¼ ä¸‰",
      "is_readonly": true,
      "shared_at": "2025-11-11T09:00:00",
      ...å…¶ä»– event å­—æ®µ
    }
  ]
  ```
- `version`: æ¯æ¬¡æ•°æ®æ›´æ–°æ—¶é€’å¢ï¼Œç”¨äºå‰ç«¯æ£€æµ‹æ˜¯å¦æœ‰æ–°æ•°æ®
- `last_updated`: æœ€åæ›´æ–°æ—¶é—´

---

### 1.2 UserData æ‰©å±•

#### events å­—æ®µæ‰©å±•
åœ¨ç°æœ‰çš„ `DATA_SCHEMA["events"]["items"]` ä¸­æ·»åŠ ï¼š

```python
"shared_to_groups": {
    "type": list,
    "nullable": False,
    "default": [],
    "description": "è¯¥æ—¥ç¨‹åˆ†äº«åˆ°çš„ç¾¤ç»„åˆ—è¡¨"
}
```

**ç¤ºä¾‹æ•°æ®**:
```json
{
  "id": "event_123",
  "title": "é¡¹ç›®è®¨è®ºä¼š",
  "groupID": "1",  // æ—¥ç¨‹ç»„ï¼ˆä¸ªäººåˆ†ç±»ï¼‰
  "shared_to_groups": ["share_group_work", "share_group_team"],  // åˆ†äº«ç¾¤ç»„
  ...
}
```

**æ³¨æ„äº‹é¡¹**:
- `groupID`: ç”¨æˆ·ä¸ªäººçš„æ—¥ç¨‹åˆ†ç±»ï¼ˆç°æœ‰åŠŸèƒ½ï¼Œä¸å˜ï¼‰
- `shared_to_groups`: åˆ†äº«åˆ°çš„åä½œç¾¤ç»„ï¼ˆæ–°å¢åŠŸèƒ½ï¼‰
- ä¸¤è€…äº’ä¸å¹²æ‰°ï¼Œå¯ä»¥åŒæ—¶å­˜åœ¨

---

### 1.3 æ•°æ®æµè½¬é€»è¾‘

#### æ ¸å¿ƒæµç¨‹å›¾
```
ç”¨æˆ·Aç¼–è¾‘æ—¥ç¨‹
    â†“
æ·»åŠ  shared_to_groups: ["share_group_work"]
    â†“
ä¿å­˜åˆ° UserData["events"]
    â†“
è§¦å‘åŒæ­¥ä»»åŠ¡ sync_group_calendar_data(["share_group_work"])
    â†“
æŸ¥è¯¢ share_group_work æ‰€æœ‰æˆå‘˜çš„ events
    â†“
ç­›é€‰å‡º shared_to_groups åŒ…å« "share_group_work" çš„æ—¥ç¨‹
    â†“
æ±‡æ€»åˆ° GroupCalendarData.events_data
    â†“
é€’å¢ version ç‰ˆæœ¬å·
    â†“
ç”¨æˆ·Bè½®è¯¢æ£€æµ‹åˆ° version å˜åŒ–
    â†“
é‡æ–°åŠ è½½ç¾¤ç»„æ—¥ç¨‹
```

#### å…³é”®ç‚¹
1. **å•å‘æµåŠ¨**: ç”¨æˆ·æ—¥ç¨‹ â†’ ç¾¤ç»„æ•°æ®åº“ï¼ˆåªè¯»ï¼‰
2. **å®æ—¶åŒæ­¥**: ç¼–è¾‘åç«‹å³è§¦å‘åŒæ­¥
3. **ç‰ˆæœ¬æ§åˆ¶**: é€šè¿‡ version è®©å‰ç«¯çŸ¥é“ä½•æ—¶åˆ·æ–°
4. **å·®å¼‚å¯¹æ¯”**: è®°å½•"ä¹‹å‰åˆ†äº«åˆ°å“ªäº›ç¾¤ç»„"ï¼ŒåŒæ­¥æ—¶å¤„ç†å¢åˆ æ”¹

---

## ğŸ”„ Part 2: æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### 2.1 æµç¨‹1ï¼šç”¨æˆ·åˆ†äº«æ—¥ç¨‹åˆ°ç¾¤ç»„

#### åœºæ™¯æè¿°
ç”¨æˆ·Aæœ‰ä¸€ä¸ªé‡å¤æ—¥ç¨‹"æ¯å‘¨ä¾‹ä¼š"ï¼ˆFREQ=WEEKLYï¼‰ï¼Œæƒ³è¦åˆ†äº«åˆ°"å·¥ä½œåä½œç»„"

#### å‰ç«¯æ“ä½œæµç¨‹
1. ç”¨æˆ·ç‚¹å‡»ç¼–è¾‘æ—¥ç¨‹
2. é€‰æ‹©"ç¼–è¾‘å…¨éƒ¨"æ¨¡å¼ï¼ˆé’ˆå¯¹é‡å¤æ—¥ç¨‹ç³»åˆ—ï¼‰
3. åœ¨"åˆ†äº«è®¾ç½®"åŒºåŸŸå‹¾é€‰"å·¥ä½œåä½œç»„"
4. ç‚¹å‡»ä¿å­˜

**æ³¨æ„**: é™¤äº† `bulk_edit_events_impl`ï¼Œè¿˜æœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦é€‚é…ï¼š
- **`update_events_impl`**: ç”¨äºæ‹–æ‹½äº‹ä»¶æ”¹å˜æ—¶é—´ï¼Œä¹Ÿæ”¯æŒå­—æ®µæ›´æ–°ï¼Œéœ€è¦æ·»åŠ  `shared_to_groups` å¤„ç†
- **`create_event_impl`**: åˆ›å»ºæ—¥ç¨‹æ—¶ï¼Œéœ€è¦æ”¯æŒåŒæ—¶åˆ†äº«åˆ°ç¾¤ç»„

#### åç«¯å¤„ç†æµç¨‹
```python
# views_events.py - bulk_edit_events_impl()

# 1. æ¥æ”¶å‰ç«¯æ•°æ®
data = {
    "event_id": "event_123",
    "edit_scope": "all",  # ç¼–è¾‘æ•´ä¸ªç³»åˆ—
    "shared_to_groups": ["share_group_work"]  # æ–°å¢å­—æ®µ
}

# 2. æ ¹æ® edit_scopeï¼Œæ‰¾åˆ°è¯¥ç³»åˆ—çš„æ‰€æœ‰äº‹ä»¶
if edit_scope == 'all' and series_id:
    affected_events = [e for e in events if e['series_id'] == series_id]
else:
    affected_events = [target_event]

# 3. è®°å½•"ä¹‹å‰åˆ†äº«åˆ°å“ªäº›ç¾¤ç»„"ï¼ˆç”¨äºå·®å¼‚å¯¹æ¯”ï¼‰
old_shared_groups = set()
for event in affected_events:
    old_shared_groups.update(event.get('shared_to_groups', []))

# 4. æ›´æ–°æ‰€æœ‰äº‹ä»¶çš„ shared_to_groups
new_shared_groups = set(data.get('shared_to_groups', []))
for event in affected_events:
    event['shared_to_groups'] = list(new_shared_groups)

# 5. ä¿å­˜åˆ° UserData
user_events_data.set_value(events)

# 6. è®¡ç®—å·®å¼‚ï¼Œè§¦å‘åŒæ­¥
added_groups = new_shared_groups - old_shared_groups  # æ–°å¢çš„ç¾¤ç»„
removed_groups = old_shared_groups - new_shared_groups  # ç§»é™¤çš„ç¾¤ç»„
all_affected_groups = added_groups | removed_groups

if all_affected_groups:
    sync_group_calendar_data(list(all_affected_groups), user)
```

#### åŒæ­¥ä»»åŠ¡é€»è¾‘
```python
# views_share_groups.py - sync_group_calendar_data()

def sync_group_calendar_data(share_group_ids: list, trigger_user=None):
    """åŒæ­¥ç¾¤ç»„æ—¥å†æ•°æ®"""
    for group_id in share_group_ids:
        # 1. è·å–ç¾¤ç»„æ‰€æœ‰æˆå‘˜
        memberships = GroupMembership.objects.filter(share_group_id=group_id)
        
        # 2. æ±‡æ€»æ‰€æœ‰æˆå‘˜çš„å…±äº«æ—¥ç¨‹
        all_shared_events = []
        
        for membership in memberships:
            # è·å–æˆå‘˜çš„ events
            user_events_data = UserData.objects.get(
                user=membership.user, 
                key='events'
            )
            events = json.loads(user_events_data.value)
            
            # ç­›é€‰åˆ†äº«åˆ°è¯¥ç¾¤ç»„çš„æ—¥ç¨‹
            shared_events = [
                e for e in events 
                if group_id in e.get('shared_to_groups', [])
            ]
            
            # æ·»åŠ  owner ä¿¡æ¯å’Œåªè¯»æ ‡è®°
            for event in shared_events:
                event_copy = event.copy()
                event_copy['owner_id'] = membership.user.id
                event_copy['owner_name'] = membership.user.username
                event_copy['is_readonly'] = True
                event_copy['shared_at'] = datetime.now().isoformat()
                all_shared_events.append(event_copy)
        
        # 3. ä¿å­˜åˆ°ç¾¤ç»„æ•°æ®åº“ï¼Œé€’å¢ç‰ˆæœ¬å·
        group_data, created = GroupCalendarData.objects.get_or_create(
            share_group_id=group_id,
            defaults={'events_data': [], 'version': 0}
        )
        
        group_data.events_data = all_shared_events
        group_data.version += 1
        group_data.save()
        
        logger.info(f"Synced {len(all_shared_events)} events to group {group_id}, version {group_data.version}")
```

---

### 2.2 æµç¨‹2ï¼šç”¨æˆ·æŸ¥çœ‹ç¾¤ç»„æ—¥ç¨‹

#### åœºæ™¯æè¿°
ç”¨æˆ·Bæ‰“å¼€æ—¥å†ï¼Œç‚¹å‡»"å·¥ä½œåä½œç»„"é€‰é¡¹å¡ï¼ŒæŸ¥çœ‹ç¾¤ç»„å†…æ‰€æœ‰äººçš„å…±äº«æ—¥ç¨‹

#### å‰ç«¯æ“ä½œæµç¨‹
1. ç”¨æˆ·ç‚¹å‡»"å·¥ä½œåä½œç»„"é€‰é¡¹å¡
2. å‰ç«¯å‘é€ GET è¯·æ±‚ï¼Œæºå¸¦æœ¬åœ°ç¼“å­˜çš„ç‰ˆæœ¬å·
3. åç«¯è¿”å›ç¾¤ç»„æ—¥ç¨‹æ•°æ®ï¼ˆæˆ–å‘ŠçŸ¥æ— æ›´æ–°ï¼‰
4. å‰ç«¯æ¸²æŸ“æ—¥ç¨‹ï¼ˆåªè¯»æ¨¡å¼ï¼‰

#### API è®¾è®¡
```python
# GET /api/share-groups/{share_group_id}/events/?version={local_version}

# å“åº”æ ¼å¼1ï¼šæœ‰æ›´æ–°
{
    "status": "updated",
    "version": 125,
    "events": [
        {
            "id": "event_123",
            "title": "é¡¹ç›®è®¨è®º",
            "owner_id": 1,
            "owner_name": "å¼ ä¸‰",
            "is_readonly": true,
            ...
        }
    ],
    "last_updated": "2025-11-11T10:30:00"
}

# å“åº”æ ¼å¼2ï¼šæ— æ›´æ–°
{
    "status": "no_update",
    "version": 124
}
```

#### åç«¯å®ç°é€»è¾‘
```python
# views_share_groups.py - get_share_group_events()

def get_share_group_events(request, share_group_id):
    """è·å–ç¾¤ç»„æ—¥ç¨‹ï¼ˆå¸¦ç‰ˆæœ¬æ£€æµ‹ï¼‰"""
    local_version = int(request.GET.get('version', 0))
    
    # 1. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ˜¯è¯¥ç¾¤ç»„æˆå‘˜
    if not GroupMembership.objects.filter(
        share_group_id=share_group_id,
        user=request.user
    ).exists():
        return JsonResponse({'error': 'æ‚¨ä¸æ˜¯è¯¥ç¾¤ç»„æˆå‘˜'}, status=403)
    
    # 2. è·å–ç¾¤ç»„æ•°æ®
    try:
        group_data = GroupCalendarData.objects.get(share_group_id=share_group_id)
    except GroupCalendarData.DoesNotExist:
        return JsonResponse({
            'status': 'updated',
            'version': 0,
            'events': [],
            'last_updated': None
        })
    
    # 3. ç‰ˆæœ¬æ£€æµ‹
    if group_data.version == local_version:
        return JsonResponse({
            'status': 'no_update',
            'version': local_version
        })
    
    # 4. è¿”å›æœ€æ–°æ•°æ®
    return JsonResponse({
        'status': 'updated',
        'version': group_data.version,
        'events': group_data.events_data,
        'last_updated': group_data.last_updated.isoformat()
    })
```

---

### 2.3 æµç¨‹3ï¼šç”¨æˆ·ç¼–è¾‘/åˆ é™¤å·²åˆ†äº«çš„æ—¥ç¨‹

#### åœºæ™¯æè¿°
ç”¨æˆ·Aç¼–è¾‘äº†å·²åˆ†äº«çš„æ—¥ç¨‹"é¡¹ç›®è®¨è®º"ï¼Œä¿®æ”¹äº†æ—¶é—´å’Œæ ‡é¢˜

#### å…³é”®é€»è¾‘
1. **åˆ©ç”¨ç°æœ‰ç¼–è¾‘API**: ä¸éœ€è¦æ–°APIï¼Œç›´æ¥ä½¿ç”¨ç°æœ‰çš„ç¼–è¾‘æ¥å£
   - `bulk_edit_events_impl` - ç¼–è¾‘å¼¹çª—ä¿å­˜æ—¶è§¦å‘
   - `update_events_impl` - æ‹–æ‹½äº‹ä»¶æˆ–å¿«é€Ÿç¼–è¾‘æ—¶è§¦å‘
2. **è‡ªåŠ¨æ£€æµ‹åˆ†äº«çŠ¶æ€**: åç«¯æ£€æŸ¥ `shared_to_groups` æ˜¯å¦éç©º
3. **è§¦å‘åŒæ­¥**: å¦‚æœæœ‰åˆ†äº«ï¼Œè‡ªåŠ¨è§¦å‘ `sync_group_calendar_data`
4. **å‰ç«¯æ„ŸçŸ¥**: ç”¨æˆ·Bçš„å‰ç«¯è½®è¯¢æ£€æµ‹åˆ°ç‰ˆæœ¬å˜åŒ–ï¼Œæç¤ºåˆ·æ–°

#### ä»£ç ä¿®æ”¹ç‚¹

##### æ–¹æ¡ˆAï¼šbulk_edit_events_implï¼ˆç¼–è¾‘å¼¹çª—ï¼‰
```python
# views_events.py - bulk_edit_events_impl() æœ«å°¾

# ç°æœ‰ä¿å­˜é€»è¾‘
user_events_data.set_value(updated_events)

# æ–°å¢ï¼šæ£€æµ‹å¹¶åŒæ­¥ç¾¤ç»„æ•°æ®
affected_groups = set()
for event in updated_events:
    old_groups = set(event.get('_old_shared_to_groups', []))
    new_groups = set(event.get('shared_to_groups', []))
    affected_groups.update(old_groups | new_groups)

if affected_groups:
    from .views_share_groups import sync_group_calendar_data
    sync_group_calendar_data(list(affected_groups), request.user)

return JsonResponse({'status': 'success'})
```

##### æ–¹æ¡ˆBï¼šupdate_events_implï¼ˆæ‹–æ‹½/å¿«é€Ÿç¼–è¾‘ï¼‰
```python
# views_events.py - update_events_impl() æœ«å°¾

# ç°æœ‰ä¿å­˜é€»è¾‘
user_events_data.set_value(events)

# æ–°å¢ï¼šæ£€æµ‹å¹¶åŒæ­¥ç¾¤ç»„æ•°æ®
affected_groups = set()

# å¦‚æœç¼–è¾‘å•ä¸ªå®ä¾‹
if rrule_change_scope == 'single':
    old_groups = set(target_event.get('_old_shared_to_groups', []))
    new_groups = set(target_event.get('shared_to_groups', []))
    affected_groups.update(old_groups | new_groups)

# å¦‚æœç¼–è¾‘æ•´ä¸ªç³»åˆ—
elif rrule_change_scope in ['all', 'future', 'from_time']:
    for event in events:
        if event.get('series_id') == series_id:
            old_groups = set(event.get('_old_shared_to_groups', []))
            new_groups = set(event.get('shared_to_groups', []))
            affected_groups.update(old_groups | new_groups)

if affected_groups:
    from .views_share_groups import sync_group_calendar_data
    sync_group_calendar_data(list(affected_groups), request.user)

return JsonResponse({'status': 'success'})
```

#### åˆ é™¤æ—¥ç¨‹çš„ç‰¹æ®Šå¤„ç†
å½“ç”¨æˆ·åˆ é™¤å·²åˆ†äº«çš„æ—¥ç¨‹æ—¶ï¼š
1. ä»ç”¨æˆ·çš„ `events` ä¸­ç§»é™¤
2. `sync_group_calendar_data` ä¼šé‡æ–°æ±‡æ€»ï¼Œè‡ªåŠ¨ç§»é™¤è¯¥æ—¥ç¨‹
3. ç¾¤ç»„æ•°æ®åº“ä¸­çš„è¯¥æ—¥ç¨‹æ¶ˆå¤±
4. å…¶ä»–æˆå‘˜åˆ·æ–°åçœ‹ä¸åˆ°è¯¥æ—¥ç¨‹

---

### 2.4 æµç¨‹4ï¼šå–æ¶ˆåˆ†äº«

#### åœºæ™¯æè¿°
ç”¨æˆ·Aå†³å®šä¸å†åˆ†äº«"é¡¹ç›®è®¨è®º"åˆ°"å·¥ä½œåä½œç»„"

#### å‰ç«¯æ“ä½œ
1. ç¼–è¾‘æ—¥ç¨‹
2. å–æ¶ˆå‹¾é€‰"å·¥ä½œåä½œç»„"
3. ä¿å­˜

#### åç«¯å¤„ç†
```python
# æ—§å€¼: shared_to_groups: ["share_group_work", "share_group_team"]
# æ–°å€¼: shared_to_groups: ["share_group_team"]

# å·®å¼‚è®¡ç®—
old_groups = {"share_group_work", "share_group_team"}
new_groups = {"share_group_team"}

removed_groups = old_groups - new_groups  # {"share_group_work"}
added_groups = new_groups - old_groups    # {}

# è§¦å‘åŒæ­¥
sync_group_calendar_data(["share_group_work", "share_group_team"])
# - share_group_work: é‡æ–°æ±‡æ€»ï¼Œè¯¥æ—¥ç¨‹è¢«ç§»é™¤
# - share_group_team: é‡æ–°æ±‡æ€»ï¼Œè¯¥æ—¥ç¨‹ä»å­˜åœ¨
```

---

### 2.5 æµç¨‹5ï¼šå‰ç«¯ç‰ˆæœ¬æ£€æµ‹ä¸è‡ªåŠ¨åˆ·æ–°

#### è½®è¯¢æœºåˆ¶
```javascript
// å‰ç«¯æ¯30ç§’æ£€æµ‹ä¸€æ¬¡ç‰ˆæœ¬
let groupVersions = {}; // {share_group_id: version}

setInterval(() => {
    const activeTab = $('.calendar-tab.active');
    if (activeTab.data('type') === 'share-group') {
        const groupId = activeTab.data('id');
        checkGroupUpdate(groupId);
    }
}, 30000);

function checkGroupUpdate(groupId) {
    const localVersion = groupVersions[groupId] || 0;
    
    fetch(`/api/share-groups/${groupId}/check-update/?version=${localVersion}`)
        .then(res => res.json())
        .then(data => {
            if (data.has_update) {
                // æ˜¾ç¤ºæ›´æ–°å¾½ç« 
                showUpdateBadge(groupId);
                
                // å¦‚æœæ­£åœ¨æŸ¥çœ‹è¯¥ç¾¤ç»„ï¼Œè‡ªåŠ¨åˆ·æ–°
                if (isViewingGroup(groupId)) {
                    loadGroupEvents(groupId);
                }
            }
        });
}
```

#### API è®¾è®¡
```python
# GET /api/share-groups/{share_group_id}/check-update/?version={local_version}

# å“åº”
{
    "has_update": true/false,
    "current_version": 125
}
```

---

## ğŸ› ï¸ Part 3: ä»£ç å®ç°è¦ç‚¹

### 3.1 models.py ä¿®æ”¹

#### æ–°å¢ä¸‰ä¸ªæ¨¡å‹ç±»
åœ¨ `core/models.py` æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š

```python
class CollaborativeCalendarGroup(models.Model):
    """åä½œæ—¥å†ç¾¤ç»„"""
    # ... (å‚è€ƒ Part 1 çš„å®Œæ•´å®šä¹‰)

class GroupMembership(models.Model):
    """ç¾¤ç»„æˆå‘˜å…³ç³»"""
    # ... (å‚è€ƒ Part 1 çš„å®Œæ•´å®šä¹‰)

class GroupCalendarData(models.Model):
    """ç¾¤ç»„æ—¥å†æ•°æ®"""
    # ... (å‚è€ƒ Part 1 çš„å®Œæ•´å®šä¹‰)
```

#### æ‰©å±• DATA_SCHEMA
åœ¨ `DATA_SCHEMA["events"]["items"]` ä¸­æ·»åŠ ï¼š

```python
"shared_to_groups": {
    "type": list,
    "nullable": False,
    "default": [],
},
```

#### æ•°æ®åº“è¿ç§»
```bash
python manage.py makemigrations
python manage.py migrate
```

---

### 3.2 views_share_groups.py æ–°å»ºæ–‡ä»¶

åˆ›å»º `core/views_share_groups.py`ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒå‡½æ•°ï¼š

#### å‡½æ•°æ¸…å•
1. `create_share_group(request)` - åˆ›å»ºç¾¤ç»„
2. `get_my_share_groups(request)` - è·å–æˆ‘çš„ç¾¤ç»„åˆ—è¡¨
3. `join_share_group(request)` - åŠ å…¥ç¾¤ç»„ï¼ˆé€šè¿‡é‚€è¯·ç ï¼‰
4. `leave_share_group(request, share_group_id)` - é€€å‡ºç¾¤ç»„
5. `delete_share_group(request, share_group_id)` - åˆ é™¤ç¾¤ç»„ï¼ˆä»…ç¾¤ä¸»ï¼‰
6. `get_share_group_events(request, share_group_id)` - è·å–ç¾¤ç»„æ—¥ç¨‹
7. `check_group_update(request, share_group_id)` - æ£€æŸ¥æ›´æ–°
8. `sync_group_calendar_data(share_group_ids, trigger_user)` - **æ ¸å¿ƒåŒæ­¥å‡½æ•°**

#### æ ¸å¿ƒå‡½æ•°ä¼ªä»£ç 
```python
# 1. åˆ›å»ºç¾¤ç»„
@api_view(['POST'])
@permission_classes([IsAuthenticated])
def create_share_group(request):
    # - ç”Ÿæˆ share_group_id
    # - åˆ›å»º CollaborativeCalendarGroup
    # - æ·»åŠ åˆ›å»ºè€…ä¸º owner æˆå‘˜
    # - åˆå§‹åŒ– GroupCalendarData
    # - è¿”å›ç¾¤ç»„ä¿¡æ¯

# 2. åŒæ­¥ç¾¤ç»„æ•°æ®ï¼ˆæœ€æ ¸å¿ƒï¼‰
def sync_group_calendar_data(share_group_ids: list, trigger_user=None):
    for group_id in share_group_ids:
        # - æŸ¥è¯¢ç¾¤ç»„æ‰€æœ‰æˆå‘˜
        # - éå†æˆå‘˜ï¼Œè·å–å…¶ events
        # - ç­›é€‰ shared_to_groups åŒ…å«è¯¥ç¾¤ç»„çš„æ—¥ç¨‹
        # - æ·»åŠ  owner_id, owner_name, is_readonly
        # - ä¿å­˜åˆ° GroupCalendarData.events_data
        # - é€’å¢ version
```

---

### 3.3 views_events.py ä¿®æ”¹

#### ä¿®æ”¹ç‚¹1ï¼šbulk_edit_events_impl æœ«å°¾ï¼ˆç¼–è¾‘å¼¹çª—è§¦å‘ï¼‰
åœ¨ä¿å­˜ `user_events_data.set_value(updated_events)` ä¹‹åæ·»åŠ ï¼š

```python
# æ–°å¢ï¼šåŒæ­¥ç¾¤ç»„æ•°æ®
affected_groups = set()
for event in updated_events:
    old_groups = set(event.get('_old_shared_to_groups', []))  # éœ€è¦è®°å½•æ—§å€¼
    new_groups = set(event.get('shared_to_groups', []))
    affected_groups.update(old_groups | new_groups)

if affected_groups:
    from .views_share_groups import sync_group_calendar_data
    sync_group_calendar_data(list(affected_groups), request.user)
```

#### ä¿®æ”¹ç‚¹2ï¼šupdate_events_impl æœ«å°¾ï¼ˆæ‹–æ‹½/å¿«é€Ÿç¼–è¾‘è§¦å‘ï¼‰
**æ³¨æ„**: `update_events_impl` ç”¨äºæ‹–æ‹½äº‹ä»¶æ”¹å˜æ—¶é—´ï¼Œä¹Ÿæ”¯æŒå…¶ä»–å­—æ®µæ›´æ–°ã€‚

åœ¨ä¿å­˜ `user_events_data.set_value(events)` ä¹‹åæ·»åŠ ï¼š

```python
# æ–°å¢ï¼šåŒæ­¥ç¾¤ç»„æ•°æ®ï¼ˆä¸ bulk_edit_events_impl ç›¸åŒé€»è¾‘ï¼‰
affected_groups = set()

# æ–¹æ¡ˆ1ï¼šå¦‚æœåªç¼–è¾‘äº†å•ä¸ªäº‹ä»¶
if target_event:
    old_groups = set(target_event.get('_old_shared_to_groups', []))
    new_groups = set(target_event.get('shared_to_groups', []))
    affected_groups.update(old_groups | new_groups)

# æ–¹æ¡ˆ2ï¼šå¦‚æœæ˜¯é‡å¤äº‹ä»¶ä¸”ç¼–è¾‘äº†æ•´ä¸ªç³»åˆ—
if is_recurring and rrule_change_scope in ['all', 'future', 'from_time']:
    for event in events:
        if event.get('series_id') == series_id:
            old_groups = set(event.get('_old_shared_to_groups', []))
            new_groups = set(event.get('shared_to_groups', []))
            affected_groups.update(old_groups | new_groups)

if affected_groups:
    from .views_share_groups import sync_group_calendar_data
    sync_group_calendar_data(list(affected_groups), request.user)
```

#### ä¿®æ”¹ç‚¹3ï¼šè®°å½•æ—§å€¼ï¼ˆä¸¤ä¸ªå‡½æ•°éƒ½éœ€è¦ï¼‰
åœ¨ `bulk_edit_events_impl` å’Œ `update_events_impl` ä¿®æ”¹äº‹ä»¶ä¹‹å‰ï¼Œè®°å½• `_old_shared_to_groups`ï¼š

```python
# åœ¨ä¿®æ”¹äº‹ä»¶å‰
for event in events:
    if event.get('id') == event_id:
        event['_old_shared_to_groups'] = event.get('shared_to_groups', []).copy()
        # ... ç„¶åè¿›è¡Œä¿®æ”¹
```

#### ä¿®æ”¹ç‚¹4ï¼šcreate_event_implï¼ˆåˆ›å»ºäº‹ä»¶ï¼‰
åˆ›å»ºäº‹ä»¶æ—¶ï¼Œå¦‚æœæœ‰ `shared_to_groups`ï¼Œä¹Ÿéœ€è¦è§¦å‘åŒæ­¥ï¼š

```python
# åˆ›å»ºäº‹ä»¶å
if new_event.get('shared_to_groups'):
    from .views_share_groups import sync_group_calendar_data
    sync_group_calendar_data(new_event['shared_to_groups'], request.user)
```

---

#### ğŸ“‹ æ€»ç»“ï¼šéœ€è¦ä¿®æ”¹çš„æ¥å£

| æ¥å£å‡½æ•° | è§¦å‘åœºæ™¯ | æ˜¯å¦éœ€è¦åŒæ­¥ | ä¿®æ”¹ä½ç½® |
|---------|---------|-------------|---------|
| `bulk_edit_events_impl` | ç¼–è¾‘å¼¹çª—ä¿å­˜/æ‰¹é‡åˆ é™¤ | âœ… æ˜¯ | å‡½æ•°æœ«å°¾ |
| `update_events_impl` | æ‹–æ‹½äº‹ä»¶/å¿«é€Ÿç¼–è¾‘ | âœ… æ˜¯ | å‡½æ•°æœ«å°¾ |
| `create_event_impl` | åˆ›å»ºæ–°æ—¥ç¨‹ | âœ… æ˜¯ | å‡½æ•°æœ«å°¾ |
| `delete_event` (å·²å¼ƒç”¨) | - | âŒ å¦ | - |

---

### 3.4 urls.py è·¯ç”±é…ç½®

åœ¨ `core/urls.py` ä¸­æ·»åŠ ï¼š

```python
from . import views_share_groups

urlpatterns = [
    # ... ç°æœ‰è·¯ç”±
    
    # åˆ†äº«ç¾¤ç»„ç®¡ç†
    path('api/share-groups/create/', views_share_groups.create_share_group, name='create_share_group'),
    path('api/share-groups/my-groups/', views_share_groups.get_my_share_groups, name='get_my_share_groups'),
    path('api/share-groups/join/', views_share_groups.join_share_group, name='join_share_group'),
    path('api/share-groups/<str:share_group_id>/leave/', views_share_groups.leave_share_group, name='leave_share_group'),
    path('api/share-groups/<str:share_group_id>/delete/', views_share_groups.delete_share_group, name='delete_share_group'),
    
    # ç¾¤ç»„æ—¥ç¨‹
    path('api/share-groups/<str:share_group_id>/events/', views_share_groups.get_share_group_events, name='get_share_group_events'),
    path('api/share-groups/<str:share_group_id>/check-update/', views_share_groups.check_group_update, name='check_group_update'),
]
```

---

### 3.5 admin.py æ³¨å†Œæ¨¡å‹

åœ¨ `core/admin.py` ä¸­æ·»åŠ ï¼š

```python
from .models import CollaborativeCalendarGroup, GroupMembership, GroupCalendarData

@admin.register(CollaborativeCalendarGroup)
class CollaborativeCalendarGroupAdmin(admin.ModelAdmin):
    list_display = ('share_group_id', 'share_group_name', 'owner', 'created_at')
    search_fields = ('share_group_name', 'owner__username')

@admin.register(GroupMembership)
class GroupMembershipAdmin(admin.ModelAdmin):
    list_display = ('share_group', 'user', 'role', 'joined_at')
    list_filter = ('role',)

@admin.register(GroupCalendarData)
class GroupCalendarDataAdmin(admin.ModelAdmin):
    list_display = ('share_group', 'version', 'last_updated')
```

---

## ğŸ¨ Part 4: å‰ç«¯å®ç°è¦ç‚¹

### 4.1 é€‰é¡¹å¡åˆ‡æ¢ UI

#### HTML ç»“æ„ï¼ˆåœ¨æ—¥å†å¡ç‰‡é¡¶éƒ¨ï¼‰
```html
<!-- åœ¨ home.html ä¸­ï¼Œæ—¥å†å¡ç‰‡å†…éƒ¨æ·»åŠ  -->
<div class="calendar-tabs-container">
    <!-- æˆ‘çš„æ—¥ç¨‹ -->
    <div class="calendar-tab active" data-type="my" data-id="my-calendar">
        <i class="fas fa-user"></i>
        <span>æˆ‘çš„æ—¥ç¨‹</span>
    </div>
    
    <!-- ç¾¤ç»„é€‰é¡¹å¡ï¼ˆåŠ¨æ€æ¸²æŸ“ï¼‰ -->
    <div class="calendar-tab" data-type="share-group" data-id="share_group_xxx">
        <i class="fas fa-users"></i>
        <span>å·¥ä½œåä½œ</span>
        <span class="update-badge" style="display:none;">â€¢</span>
    </div>
    
    <!-- æ·»åŠ æŒ‰é’® -->
    <div class="calendar-tab-add" title="åˆ›å»º/åŠ å…¥ç¾¤ç»„">
        <i class="fas fa-plus"></i>
    </div>
</div>
```

#### CSS æ ·å¼
```css
.calendar-tabs-container {
    display: flex;
    gap: 8px;
    padding: 10px;
    border-bottom: 1px solid #ddd;
    overflow-x: auto;
}

.calendar-tab {
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    gap: 6px;
}

.calendar-tab:hover {
    background: #f0f0f0;
}

.calendar-tab.active {
    background: #007bff;
    color: white;
}

.update-badge {
    color: #ff4444;
    font-size: 20px;
    animation: pulse 1s infinite;
}
```

#### JavaScript åˆ‡æ¢é€»è¾‘
```javascript
// åˆ‡æ¢é€‰é¡¹å¡
$('.calendar-tab').on('click', function() {
    const type = $(this).data('type');
    const id = $(this).data('id');
    
    // æ›´æ–°æ¿€æ´»çŠ¶æ€
    $('.calendar-tab').removeClass('active');
    $(this).addClass('active');
    
    // éšè—æ›´æ–°å¾½ç« 
    $(this).find('.update-badge').hide();
    
    if (type === 'my') {
        // åŠ è½½æˆ‘çš„æ—¥ç¨‹ï¼ˆç°æœ‰é€»è¾‘ï¼‰
        loadMyCalendar();
    } else if (type === 'share-group') {
        // åŠ è½½ç¾¤ç»„æ—¥ç¨‹
        loadGroupCalendar(id);
    }
});

function loadGroupCalendar(groupId) {
    const localVersion = groupVersions[groupId] || 0;
    
    fetch(`/api/share-groups/${groupId}/events/?version=${localVersion}`)
        .then(res => res.json())
        .then(data => {
            if (data.status === 'updated') {
                // æ›´æ–°æœ¬åœ°ç‰ˆæœ¬å·
                groupVersions[groupId] = data.version;
                
                // æ¸²æŸ“æ—¥ç¨‹ï¼ˆåªè¯»æ¨¡å¼ï¼‰
                calendar.removeAllEvents();
                calendar.addEventSource(data.events);
                calendar.refetchEvents();
            }
        });
}
```

---

### 4.2 ç¼–è¾‘å¼¹çª—æ·»åŠ åˆ†äº«é€‰é¡¹

#### HTMLï¼ˆåœ¨ç¼–è¾‘å¼¹çª—ä¸­æ·»åŠ ï¼‰
```html
<!-- åœ¨ editEventModal ä¸­æ·»åŠ  -->
<div class="form-group">
    <label>
        <i class="fas fa-share-alt"></i>
        åˆ†äº«åˆ°ç¾¤ç»„
    </label>
    <div class="share-groups-selector" id="shareGroupsSelector">
        <!-- åŠ¨æ€æ¸²æŸ“ç¾¤ç»„åˆ—è¡¨ -->
        <label>
            <input type="checkbox" name="share_group" value="share_group_work">
            <i class="fas fa-users"></i>
            å·¥ä½œåä½œç»„
        </label>
        <label>
            <input type="checkbox" name="share_group" value="share_group_family">
            <i class="fas fa-home"></i>
            å®¶åº­æ—¥å†
        </label>
    </div>
</div>
```

#### JavaScriptï¼ˆåŠ è½½ç¾¤ç»„åˆ—è¡¨ï¼‰
```javascript
// æ‰“å¼€ç¼–è¾‘å¼¹çª—æ—¶ï¼ŒåŠ è½½ç”¨æˆ·çš„ç¾¤ç»„åˆ—è¡¨
function openEditModal(event) {
    // ... ç°æœ‰é€»è¾‘
    
    // åŠ è½½ç¾¤ç»„åˆ—è¡¨
    loadShareGroupsSelector(event);
}

function loadShareGroupsSelector(event) {
    fetch('/api/share-groups/my-groups/')
        .then(res => res.json())
        .then(data => {
            const selector = $('#shareGroupsSelector');
            selector.empty();
            
            data.groups.forEach(group => {
                const isChecked = event.shared_to_groups?.includes(group.share_group_id);
                selector.append(`
                    <label>
                        <input type="checkbox" name="share_group" 
                               value="${group.share_group_id}"
                               ${isChecked ? 'checked' : ''}>
                        <i class="fas fa-users" style="color:${group.share_group_color}"></i>
                        ${group.share_group_name}
                    </label>
                `);
            });
        });
}

// ä¿å­˜æ—¶ï¼Œæ”¶é›†é€‰ä¸­çš„ç¾¤ç»„
function saveEvent() {
    const selectedGroups = [];
    $('input[name="share_group"]:checked').each(function() {
        selectedGroups.push($(this).val());
    });
    
    const eventData = {
        // ... å…¶ä»–å­—æ®µ
        shared_to_groups: selectedGroups
    };
    
    // å‘é€ä¿å­˜è¯·æ±‚ï¼ˆä½¿ç”¨ç°æœ‰ APIï¼‰
    updateEvent(eventData);
}
```

---

### 4.3 åªè¯»äº‹ä»¶æ¸²æŸ“

#### äº‹ä»¶æ¸²æŸ“å‡½æ•°ä¿®æ”¹
```javascript
// FullCalendar äº‹ä»¶æ¸²æŸ“é’©å­
eventDidMount: function(info) {
    const event = info.event;
    
    // åˆ¤æ–­æ˜¯å¦ä¸ºåªè¯»äº‹ä»¶ï¼ˆæ¥è‡ªç¾¤ç»„ï¼‰
    if (event.extendedProps.is_readonly) {
        // æ·»åŠ åªè¯»æ ·å¼
        info.el.classList.add('readonly-event');
        
        // æ·»åŠ é”å›¾æ ‡
        const lockIcon = document.createElement('i');
        lockIcon.className = 'fas fa-lock readonly-icon';
        info.el.querySelector('.fc-event-title').prepend(lockIcon);
        
        // æ·»åŠ  owner ä¿¡æ¯
        const ownerBadge = document.createElement('span');
        ownerBadge.className = 'owner-badge';
        ownerBadge.textContent = event.extendedProps.owner_name;
        info.el.querySelector('.fc-event-title').append(ownerBadge);
    }
    
    // åˆ¤æ–­æ˜¯å¦ä¸ºå·²åˆ†äº«äº‹ä»¶ï¼ˆè‡ªå·±çš„æ—¥ç¨‹ï¼‰
    if (event.extendedProps.shared_to_groups?.length > 0) {
        // æ·»åŠ åˆ†äº«æ ‡è¯†
        info.el.classList.add('shared-event');
        
        const shareIcon = document.createElement('i');
        shareIcon.className = 'fas fa-share-alt share-icon';
        shareIcon.title = 'å·²åˆ†äº«åˆ° ' + event.extendedProps.shared_to_groups.length + ' ä¸ªç¾¤ç»„';
        info.el.querySelector('.fc-event-title').prepend(shareIcon);
    }
}
```

#### CSS æ ·å¼
```css
/* åªè¯»äº‹ä»¶æ ·å¼ */
.readonly-event {
    background: #f5f5f5 !important;
    border-left: 4px solid #999 !important;
    opacity: 0.8;
    cursor: not-allowed;
}

.readonly-icon {
    margin-right: 4px;
    color: #666;
}

.owner-badge {
    margin-left: 6px;
    padding: 2px 6px;
    background: #666;
    color: white;
    border-radius: 3px;
    font-size: 11px;
}

/* å·²åˆ†äº«äº‹ä»¶æ ·å¼ */
.shared-event {
    border-left: 4px solid #007bff !important;
}

.share-icon {
    margin-right: 4px;
    color: #007bff;
}
```

#### ç‚¹å‡»äº‹ä»¶å¤„ç†
```javascript
eventClick: function(info) {
    const event = info.event;
    
    if (event.extendedProps.is_readonly) {
        // åªè¯»äº‹ä»¶ï¼Œæ˜¾ç¤ºæç¤º
        alert(`è¿™æ˜¯æ¥è‡ª ${event.extendedProps.owner_name} çš„å…±äº«æ—¥ç¨‹ï¼Œä»…å¯æŸ¥çœ‹`);
        
        // æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—ï¼ˆåªè¯»æ¨¡å¼ï¼‰
        showReadonlyEventDetails(event);
    } else {
        // å¯ç¼–è¾‘äº‹ä»¶ï¼Œæ‰“å¼€ç¼–è¾‘å¼¹çª—
        openEditModal(event);
    }
}
```

---

### 4.4 ç¾¤ç»„ç®¡ç†ç•Œé¢

#### åˆ›å»ºç¾¤ç»„å¼¹çª—
```html
<!-- ç‚¹å‡»"+"æŒ‰é’®æ—¶æ‰“å¼€ -->
<div id="createGroupModal" class="modal">
    <div class="modal-content">
        <h3>åˆ›å»ºåä½œç¾¤ç»„</h3>
        <form id="createGroupForm">
            <div class="form-group">
                <label>ç¾¤ç»„åç§°</label>
                <input type="text" name="share_group_name" required>
            </div>
            <div class="form-group">
                <label>é¢œè‰²æ ‡ç­¾</label>
                <input type="color" name="share_group_color" value="#3498db">
            </div>
            <div class="form-group">
                <label>æè¿°</label>
                <textarea name="share_group_description"></textarea>
            </div>
            <button type="submit">åˆ›å»º</button>
        </form>
    </div>
</div>
```

#### JavaScript
```javascript
$('#createGroupForm').on('submit', function(e) {
    e.preventDefault();
    
    const formData = {
        share_group_name: $('input[name="share_group_name"]').val(),
        share_group_color: $('input[name="share_group_color"]').val(),
        share_group_description: $('textarea[name="share_group_description"]').val()
    };
    
    fetch('/api/share-groups/create/', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(formData)
    })
    .then(res => res.json())
    .then(data => {
        if (data.status === 'success') {
            // åˆ·æ–°ç¾¤ç»„åˆ—è¡¨
            refreshShareGroupTabs();
            $('#createGroupModal').hide();
        }
    });
});
```

---

## ğŸ“‹ Part 5: å®æ–½æ­¥éª¤

### Phase 1: æ•°æ®åº“å‡†å¤‡ï¼ˆé¢„è®¡1å°æ—¶ï¼‰

#### Step 1.1: ä¿®æ”¹ models.py
- [ ] åœ¨ `core/models.py` æœ«å°¾æ·»åŠ ä¸‰ä¸ªæ–°æ¨¡å‹
  - CollaborativeCalendarGroup
  - GroupMembership
  - GroupCalendarData
- [ ] åœ¨ `DATA_SCHEMA["events"]["items"]` ä¸­æ·»åŠ  `shared_to_groups` å­—æ®µ

#### Step 1.2: æ•°æ®åº“è¿ç§»
```bash
python manage.py makemigrations core
python manage.py migrate
```

#### Step 1.3: æ³¨å†Œåˆ° admin
- [ ] ä¿®æ”¹ `core/admin.py`ï¼Œæ³¨å†Œä¸‰ä¸ªæ–°æ¨¡å‹
- [ ] æµ‹è¯•ï¼šè®¿é—® `/admin/`ï¼Œç¡®è®¤å¯ä»¥çœ‹åˆ°æ–°æ¨¡å‹

---

### Phase 2: åç«¯æ ¸å¿ƒåŠŸèƒ½ï¼ˆé¢„è®¡4-6å°æ—¶ï¼‰

#### Step 2.1: åˆ›å»º views_share_groups.py
- [ ] æ–°å»ºæ–‡ä»¶ `core/views_share_groups.py`
- [ ] å®ç° 8 ä¸ªæ ¸å¿ƒå‡½æ•°ï¼š
  1. `create_share_group` - åˆ›å»ºç¾¤ç»„
  2. `get_my_share_groups` - è·å–æˆ‘çš„ç¾¤ç»„
  3. `join_share_group` - åŠ å…¥ç¾¤ç»„
  4. `leave_share_group` - é€€å‡ºç¾¤ç»„
  5. `delete_share_group` - åˆ é™¤ç¾¤ç»„
  6. `get_share_group_events` - è·å–ç¾¤ç»„æ—¥ç¨‹
  7. `check_group_update` - æ£€æŸ¥æ›´æ–°
  8. **`sync_group_calendar_data`** - åŒæ­¥æ ¸å¿ƒå‡½æ•°

#### Step 2.2: ä¿®æ”¹ views_events.py
- [ ] åœ¨ **`bulk_edit_events_impl`** æœ«å°¾æ·»åŠ åŒæ­¥é€»è¾‘ï¼ˆç¼–è¾‘å¼¹çª—è§¦å‘ï¼‰
- [ ] åœ¨ **`update_events_impl`** æœ«å°¾æ·»åŠ åŒæ­¥é€»è¾‘ï¼ˆæ‹–æ‹½/å¿«é€Ÿç¼–è¾‘è§¦å‘ï¼‰
- [ ] åœ¨ä¸¤ä¸ªå‡½æ•°ä¸­ï¼Œæ›´æ–°äº‹ä»¶å‰è®°å½• `_old_shared_to_groups`
- [ ] åœ¨ **`create_event_impl`** ä¸­æ·»åŠ åŒæ­¥é€»è¾‘ï¼ˆåˆ›å»ºæ—¥ç¨‹è§¦å‘ï¼‰

#### Step 2.3: é…ç½®è·¯ç”±
- [ ] ä¿®æ”¹ `core/urls.py`ï¼Œæ·»åŠ  7 æ¡æ–°è·¯ç”±

#### Step 2.4: æµ‹è¯•åç«¯ API
ä½¿ç”¨ Postman æˆ– curl æµ‹è¯•ï¼š
```bash
# åˆ›å»ºç¾¤ç»„
POST /api/share-groups/create/
Body: {"share_group_name": "æµ‹è¯•ç¾¤ç»„", "share_group_color": "#ff0000"}

# è·å–æˆ‘çš„ç¾¤ç»„
GET /api/share-groups/my-groups/

# åˆ†äº«æ—¥ç¨‹ï¼ˆä¿®æ”¹ç°æœ‰æ—¥ç¨‹ï¼Œæ·»åŠ  shared_to_groupsï¼‰
PUT /api/events/bulk-edit/
Body: {"event_id": "xxx", "shared_to_groups": ["share_group_xxx"]}

# è·å–ç¾¤ç»„æ—¥ç¨‹
GET /api/share-groups/share_group_xxx/events/?version=0
```

---

### Phase 3: å‰ç«¯ UI å®ç°ï¼ˆé¢„è®¡6-8å°æ—¶ï¼‰

#### Step 3.1: é€‰é¡¹å¡åˆ‡æ¢ç»„ä»¶
- [ ] ä¿®æ”¹ `templates/home_new.html`
  - åœ¨æ—¥å†å¡ç‰‡é¡¶éƒ¨æ·»åŠ  `.calendar-tabs-container`
  - ç§»é™¤"æ—¥ç¨‹æ—¥å†"æ ‡é¢˜
- [ ] æ·»åŠ  CSS æ ·å¼ï¼ˆå¯åœ¨ `static/css/` ä¸­æ–°å»º `share-groups.css`ï¼‰
- [ ] å®ç° JavaScript é€»è¾‘ï¼š
  - åˆ‡æ¢é€‰é¡¹å¡
  - åŠ è½½ç¾¤ç»„æ—¥ç¨‹
  - ç‰ˆæœ¬æ£€æµ‹è½®è¯¢ï¼ˆ30ç§’ï¼‰

#### Step 3.2: ç¼–è¾‘å¼¹çª—ä¿®æ”¹
- [ ] åœ¨ç¼–è¾‘æ—¥ç¨‹å¼¹çª—ä¸­æ·»åŠ "åˆ†äº«åˆ°ç¾¤ç»„"é€‰é¡¹
- [ ] å®ç°ç¾¤ç»„åˆ—è¡¨åŠ¨æ€åŠ è½½
- [ ] ä¿å­˜æ—¶æ”¶é›† `shared_to_groups` æ•°æ®

#### Step 3.3: äº‹ä»¶æ¸²æŸ“æ ·å¼
- [ ] æ·»åŠ åªè¯»äº‹ä»¶æ ·å¼ï¼ˆç°è‰²èƒŒæ™¯+é”å›¾æ ‡ï¼‰
- [ ] æ·»åŠ å·²åˆ†äº«äº‹ä»¶æ ·å¼ï¼ˆè“è‰²è¾¹æ¡†+åˆ†äº«å›¾æ ‡ï¼‰
- [ ] å®ç°ç‚¹å‡»åªè¯»äº‹ä»¶æ—¶çš„æç¤º

#### Step 3.4: ç¾¤ç»„ç®¡ç†ç•Œé¢
- [ ] åˆ›å»ºç¾¤ç»„å¼¹çª—
- [ ] åŠ å…¥ç¾¤ç»„å¼¹çª—ï¼ˆé€šè¿‡é‚€è¯·ç ï¼‰
- [ ] ç¾¤ç»„æˆå‘˜ç®¡ç†ç•Œé¢

#### Step 3.5: æ›´æ–°æç¤º
- [ ] å®ç°ç‰ˆæœ¬æ£€æµ‹è½®è¯¢
- [ ] æ˜¾ç¤ºæ›´æ–°å¾½ç« 
- [ ] è‡ªåŠ¨åˆ·æ–°é€»è¾‘

---

### Phase 4: é›†æˆæµ‹è¯•ï¼ˆé¢„è®¡2-3å°æ—¶ï¼‰

#### Test Case 1: åˆ›å»ºç¾¤ç»„å¹¶åˆ†äº«æ—¥ç¨‹
1. ç”¨æˆ·Aåˆ›å»ºç¾¤ç»„"å·¥ä½œåä½œ"
2. ç”¨æˆ·Aç¼–è¾‘æ—¥ç¨‹"é¡¹ç›®è®¨è®º"ï¼Œåˆ†äº«åˆ°"å·¥ä½œåä½œ"
3. æ£€æŸ¥ GroupCalendarData ä¸­æ˜¯å¦æœ‰è¯¥æ—¥ç¨‹
4. ç”¨æˆ·BåŠ å…¥"å·¥ä½œåä½œ"
5. ç”¨æˆ·Båˆ‡æ¢åˆ°"å·¥ä½œåä½œ"é€‰é¡¹å¡ï¼Œç¡®è®¤å¯ä»¥çœ‹åˆ°æ—¥ç¨‹

#### Test Case 2: ç¼–è¾‘å·²åˆ†äº«çš„æ—¥ç¨‹
1. ç”¨æˆ·Aä¿®æ”¹"é¡¹ç›®è®¨è®º"çš„æ ‡é¢˜å’Œæ—¶é—´
2. æ£€æŸ¥ GroupCalendarData æ˜¯å¦æ›´æ–°
3. ç”¨æˆ·Båˆ·æ–°ï¼Œç¡®è®¤çœ‹åˆ°æœ€æ–°å†…å®¹

#### Test Case 3: åˆ é™¤å·²åˆ†äº«çš„æ—¥ç¨‹
1. ç”¨æˆ·Aåˆ é™¤"é¡¹ç›®è®¨è®º"
2. æ£€æŸ¥ GroupCalendarData ä¸­æ˜¯å¦ç§»é™¤è¯¥æ—¥ç¨‹
3. ç”¨æˆ·Båˆ·æ–°ï¼Œç¡®è®¤æ—¥ç¨‹æ¶ˆå¤±

#### Test Case 4: å–æ¶ˆåˆ†äº«
1. ç”¨æˆ·Aå–æ¶ˆ"é¡¹ç›®è®¨è®º"çš„åˆ†äº«
2. æ£€æŸ¥ GroupCalendarData ä¸­æ˜¯å¦ç§»é™¤è¯¥æ—¥ç¨‹
3. ç”¨æˆ·Båˆ·æ–°ï¼Œç¡®è®¤æ—¥ç¨‹æ¶ˆå¤±

#### Test Case 5: RRule é‡å¤æ—¥ç¨‹
1. ç”¨æˆ·Aåˆ›å»ºé‡å¤æ—¥ç¨‹"æ¯å‘¨ä¾‹ä¼š"ï¼ˆFREQ=WEEKLYï¼‰
2. é€‰æ‹©"ç¼–è¾‘å…¨éƒ¨"ï¼Œåˆ†äº«åˆ°ç¾¤ç»„
3. æ£€æŸ¥æ‰€æœ‰å®ä¾‹æ˜¯å¦éƒ½æœ‰ `shared_to_groups`
4. ç”¨æˆ·Bç¡®è®¤å¯ä»¥çœ‹åˆ°æ‰€æœ‰é‡å¤å®ä¾‹

#### Test Case 6: ç‰ˆæœ¬æ£€æµ‹
1. ç”¨æˆ·Bæ‰“å¼€"å·¥ä½œåä½œ"é€‰é¡¹å¡
2. ç”¨æˆ·Aåˆ†äº«æ–°æ—¥ç¨‹
3. ç­‰å¾…30ç§’ï¼ˆè½®è¯¢é—´éš”ï¼‰
4. ç¡®è®¤ç”¨æˆ·Bçœ‹åˆ°æ›´æ–°å¾½ç« 
5. ç‚¹å‡»é€‰é¡¹å¡ï¼Œç¡®è®¤è‡ªåŠ¨åˆ·æ–°

---

### Phase 5: ä¼˜åŒ–ä¸è¾¹ç•Œæ¡ä»¶ï¼ˆé¢„è®¡2-3å°æ—¶ï¼‰

#### è¾¹ç•Œæ¡ä»¶å¤„ç†
- [ ] ç”¨æˆ·åˆ é™¤è‡ªå·±çš„ç¾¤ç»„æ—¶ï¼Œæ¸…ç† GroupCalendarData
- [ ] ç”¨æˆ·é€€å‡ºç¾¤ç»„æ—¶ï¼Œé‡æ–°åŒæ­¥ç¾¤ç»„æ•°æ®
- [ ] ç¾¤ç»„è¢«åˆ é™¤æ—¶ï¼Œæ¸…ç†æ‰€æœ‰æˆå‘˜çš„ `shared_to_groups`
- [ ] åŒæ­¥æ—¶ï¼Œè¿‡æ»¤æ‰å·²è¢«åˆ é™¤çš„äº‹ä»¶
- [ ] å¤„ç†ç½‘ç»œè¯·æ±‚å¤±è´¥çš„æƒ…å†µ

#### æ€§èƒ½ä¼˜åŒ–
- [ ] åŒæ­¥ä»»åŠ¡å¼‚æ­¥åŒ–ï¼ˆå¯é€‰ï¼Œä½¿ç”¨ Celeryï¼‰
- [ ] ç¾¤ç»„æ—¥ç¨‹æ•°æ®ç¼“å­˜ï¼ˆå‰ç«¯ï¼‰
- [ ] å‡å°‘ä¸å¿…è¦çš„åŒæ­¥è§¦å‘

#### å®‰å…¨æ€§
- [ ] éªŒè¯ç”¨æˆ·æ˜¯å¦æ˜¯ç¾¤ç»„æˆå‘˜
- [ ] éªŒè¯ç¾¤ä¸»æƒé™
- [ ] é˜²æ­¢ SQL æ³¨å…¥ï¼ˆDjango ORM å·²å¤„ç†ï¼‰
- [ ] API æ¥å£é™æµï¼ˆå¯é€‰ï¼‰

---

## ğŸš¨ å·²çŸ¥é—®é¢˜ä¸å¾…è§£å†³

### é—®é¢˜1: å¤§è§„æ¨¡ç¾¤ç»„æ€§èƒ½
**ç°è±¡**: ç¾¤ç»„æˆå‘˜å¾ˆå¤šæ—¶ï¼ŒåŒæ­¥å¯èƒ½å¾ˆæ…¢  
**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ Celery å¼‚æ­¥ä»»åŠ¡
- å¢é‡åŒæ­¥ï¼ˆåªåŒæ­¥å˜åŒ–çš„äº‹ä»¶ï¼‰
- æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–

### é—®é¢˜2: RRule å®ä¾‹æ•°é‡åºå¤§
**ç°è±¡**: æ— é™é‡å¤çš„æ—¥ç¨‹å¯èƒ½ç”Ÿæˆå¤§é‡å®ä¾‹  
**è§£å†³æ–¹æ¡ˆ**:
- é™åˆ¶ç”Ÿæˆå®ä¾‹çš„æ—¶é—´èŒƒå›´ï¼ˆå¦‚æœªæ¥1å¹´ï¼‰
- æŒ‰éœ€ç”Ÿæˆï¼ˆlazy loadingï¼‰

### é—®é¢˜3: ç½‘ç»œå»¶è¿Ÿ
**ç°è±¡**: ç”¨æˆ·Bå¯èƒ½ä¸ä¼šç«‹å³çœ‹åˆ°æ›´æ–°  
**è§£å†³æ–¹æ¡ˆ**:
- ç¼©çŸ­è½®è¯¢é—´éš”ï¼ˆå¦‚15ç§’ï¼‰
- æœªæ¥å¯å‡çº§ä¸º WebSocket

---

## ğŸ“š é™„å½•

### A. API æ¥å£æ–‡æ¡£

#### 1. åˆ›å»ºç¾¤ç»„
```
POST /api/share-groups/create/
Headers: Authorization: Token xxx

Request:
{
    "share_group_name": "å·¥ä½œåä½œç»„",
    "share_group_color": "#3498db",
    "share_group_description": "é¡¹ç›®åä½œç”¨"
}

Response:
{
    "status": "success",
    "group": {
        "share_group_id": "share_group_xxx",
        "share_group_name": "å·¥ä½œåä½œç»„",
        "share_group_color": "#3498db",
        "owner_id": 1,
        "created_at": "2025-11-11T10:00:00"
    }
}
```

#### 2. è·å–æˆ‘çš„ç¾¤ç»„
```
GET /api/share-groups/my-groups/
Headers: Authorization: Token xxx

Response:
{
    "groups": [
        {
            "share_group_id": "share_group_work",
            "share_group_name": "å·¥ä½œåä½œç»„",
            "share_group_color": "#3498db",
            "role": "owner",
            "member_count": 5
        }
    ]
}
```

#### 3. è·å–ç¾¤ç»„æ—¥ç¨‹
```
GET /api/share-groups/{share_group_id}/events/?version=124
Headers: Authorization: Token xxx

Response (æœ‰æ›´æ–°):
{
    "status": "updated",
    "version": 125,
    "events": [
        {
            "id": "event_123",
            "title": "é¡¹ç›®è®¨è®º",
            "start": "2025-11-12T10:00:00",
            "end": "2025-11-12T11:00:00",
            "owner_id": 1,
            "owner_name": "å¼ ä¸‰",
            "is_readonly": true,
            "shared_at": "2025-11-11T09:00:00",
            ...
        }
    ],
    "last_updated": "2025-11-11T10:30:00"
}

Response (æ— æ›´æ–°):
{
    "status": "no_update",
    "version": 124
}
```

#### 4. æ£€æŸ¥æ›´æ–°
```
GET /api/share-groups/{share_group_id}/check-update/?version=124
Headers: Authorization: Token xxx

Response:
{
    "has_update": true,
    "current_version": 125
}
```

---

### B. æ•°æ®åº“è¡¨ç»“æ„

#### collaborative_calendar_group
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| share_group_id | VARCHAR(100) PK | ç¾¤ç»„ID |
| share_group_name | VARCHAR(200) | ç¾¤ç»„åç§° |
| share_group_color | VARCHAR(20) | é¢œè‰²æ ‡ç­¾ |
| share_group_description | TEXT | æè¿° |
| owner_id | INT FK | ç¾¤ä¸»ID |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |
| updated_at | DATETIME | æ›´æ–°æ—¶é—´ |

#### group_membership
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INT PK AUTO | ä¸»é”® |
| share_group_id | VARCHAR(100) FK | ç¾¤ç»„ID |
| user_id | INT FK | ç”¨æˆ·ID |
| role | VARCHAR(20) | è§’è‰² |
| joined_at | DATETIME | åŠ å…¥æ—¶é—´ |
| UNIQUE(share_group_id, user_id) |

#### group_calendar_data
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INT PK AUTO | ä¸»é”® |
| share_group_id | VARCHAR(100) FK UNIQUE | ç¾¤ç»„ID |
| events_data | JSON | äº‹ä»¶æ•°æ® |
| version | INT | ç‰ˆæœ¬å· |
| last_updated | DATETIME | æœ€åæ›´æ–°æ—¶é—´ |

---

### C. å‰ç«¯çŠ¶æ€ç®¡ç†

#### å…¨å±€å˜é‡
```javascript
// ç¾¤ç»„ç‰ˆæœ¬å·ç¼“å­˜
let groupVersions = {
    'share_group_work': 124,
    'share_group_family': 56
};

// å½“å‰æ¿€æ´»çš„æ—¥å†
let activeCalendar = {
    type: 'my',  // 'my' æˆ– 'share-group'
    id: 'my-calendar'  // æˆ– 'share_group_xxx'
};

// è½®è¯¢å®šæ—¶å™¨
let updateCheckInterval = null;
```

#### å…³é”®å‡½æ•°
```javascript
// åˆå§‹åŒ–
function initShareGroups() {
    loadShareGroupTabs();
    startUpdatePolling();
}

// åŠ è½½ç¾¤ç»„é€‰é¡¹å¡
function loadShareGroupTabs() {
    fetch('/api/share-groups/my-groups/')
        .then(res => res.json())
        .then(data => {
            renderGroupTabs(data.groups);
        });
}

// å¼€å§‹è½®è¯¢
function startUpdatePolling() {
    updateCheckInterval = setInterval(() => {
        if (activeCalendar.type === 'share-group') {
            checkGroupUpdate(activeCalendar.id);
        }
    }, 30000);
}

// åœæ­¢è½®è¯¢
function stopUpdatePolling() {
    if (updateCheckInterval) {
        clearInterval(updateCheckInterval);
    }
}
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] ç”¨æˆ·å¯ä»¥åˆ›å»ºç¾¤ç»„å¹¶é‚€è¯·æˆå‘˜
- [ ] ç”¨æˆ·å¯ä»¥å°†æ—¥ç¨‹åˆ†äº«åˆ°ç¾¤ç»„
- [ ] ç¾¤ç»„æˆå‘˜å¯ä»¥æŸ¥çœ‹å…±äº«æ—¥ç¨‹ï¼ˆåªè¯»ï¼‰
- [ ] åˆ†äº«è€…ç¼–è¾‘/åˆ é™¤æ—¥ç¨‹åï¼Œç¾¤ç»„å†…å®æ—¶åŒæ­¥
- [ ] RRule é‡å¤æ—¥ç¨‹å¯ä»¥æ•´ä½“åˆ†äº«
- [ ] å‰ç«¯ç‰ˆæœ¬æ£€æµ‹æ­£å¸¸ï¼Œæœ‰æ›´æ–°æ—¶æç¤º

### æ€§èƒ½éªŒæ”¶
- [ ] å•æ¬¡åŒæ­¥è€—æ—¶ < 3ç§’ï¼ˆ100ä¸ªæˆå‘˜ï¼Œ1000ä¸ªäº‹ä»¶ï¼‰
- [ ] å‰ç«¯è½®è¯¢ä¸å½±å“ç”¨æˆ·æ“ä½œ
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 2ç§’

### å®‰å…¨éªŒæ”¶
- [ ] éç¾¤ç»„æˆå‘˜æ— æ³•è®¿é—®ç¾¤ç»„æ—¥ç¨‹
- [ ] åªæœ‰ç¾¤ä¸»å¯ä»¥åˆ é™¤ç¾¤ç»„
- [ ] API æ¥å£æœ‰èº«ä»½éªŒè¯

### UI/UX éªŒæ”¶
- [ ] é€‰é¡¹å¡åˆ‡æ¢æµç•…
- [ ] åªè¯»äº‹ä»¶æ ·å¼æ˜æ˜¾åŒºåˆ†
- [ ] æ›´æ–°æç¤ºæ¸…æ™°
- [ ] ç§»åŠ¨ç«¯é€‚é…è‰¯å¥½

---

**æ–‡æ¡£å®Œæˆï¼** ğŸ‰



