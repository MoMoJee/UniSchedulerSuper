# AI 助手升级预期

## 1. AI 助手运作流程

### 1.1 用户聊天

### 1.2 日程生成

注意要升级为一个ToolCall

先和原来一样生成日程，但是按住不表。


## 2. 依赖函数

### 2.1 主控函数


### 2.2 生成函数




### 2.3 冲突检查函数

以天为单位

输入：
1. 当天已有日程
2. 当天新规划的日程（包含跨天日程）
3. 用户本轮对话中的输入
4. 本轮对话对应场景收集的提示词

检查依据：
1. 用户本轮对话中的输入
2. 本轮对话对应场景收集的提示词

返回： 布尔值

### 2.4 调优函数

新写一个调优函数（其实上应该说是重写原来的调优函数）

如果2.3返回冲突，则调用。

发送用户本轮对话中的输入和本轮对话对应场景收集的提示词，

发送《每一天》的日程（因为日程太多会导致ai遗漏），注意是自然语言化的原有日程➕待优化的新日程

返回调优后的所有temp日程。

调优有两种方案：改起始时间；分割多段

这个，用于升级调优功能，同样的逻辑，以天为单位调优用户已有的日程（可以也加入聊天框，多给点提示词）（甚至可以直接做成ai create 的一个tool）

### 2.5 调优时，再加一个询问函数，如果有冲突日程不知道怎么解决，问用户

也包括可能会相关但是用户没说的日程，比如上回写的用户去上海玩儿，又要见上海同学，那肯定要关联起来，问用户是不是要安排去找他玩儿

### 2.6 自然语言化的辅助函数
即把结构化的日程数据改成自然语言


### 2.7 快捷日程生成函数
输进去一段话，自动安排一个日程出来。如果有缺的信息，需要提示增加